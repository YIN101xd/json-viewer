<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Viewer - Ê®°ÂûãËØÑÂàÜÊü•ÁúãÂô®</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #f5f7fa;
            height: 100vh;
            overflow: hidden;
            color: #2c3e50;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 3px;
        }

        .header .subtitle {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .main-container {
            display: flex;
            height: calc(100vh - 75px);
        }

        /* Â∑¶‰æßÈù¢Êùø */
        .left-panel {
            width: 280px;
            background: white;
            border-right: 1px solid #e1e8ed;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .upload-section {
            padding: 15px;
            border-bottom: 1px solid #e1e8ed;
        }

        .upload-area {
            border: 2px dashed #667eea;
            border-radius: 8px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9ff;
        }

        .upload-area:hover {
            background: #eef2ff;
            border-color: #764ba2;
        }

        .upload-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .upload-text {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 10px;
        }

        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            margin: 2px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e1e8ed;
            color: #666;
        }

        .file-list-section {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .file-item {
            padding: 10px 12px;
            margin-bottom: 6px;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .file-item:hover {
            background: #eef2ff;
            border-left-color: #667eea;
            transform: translateX(2px);
        }

        .file-item.active {
            background: #eef2ff;
            border-left-color: #667eea;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.2);
        }

        .file-name {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.85em;
            margin-bottom: 4px;
        }

        .file-meta {
            font-size: 0.7em;
            color: #95a5a6;
        }

        /* Âè≥‰æßÈù¢Êùø */
        .right-panel {
            flex: 1;
            background: #fafbfc;
            overflow-y: auto;
            padding: 20px;
        }

        .empty-state {
            text-align: center;
            padding: 100px 20px;
            color: #95a5a6;
        }

        .detail-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .detail-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }

        .detail-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 12px;
        }

        .metadata-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .meta-tag {
            background: #eef2ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.8em;
        }

        /* ÂÜÖÂÆπÂå∫Âüü */
        .content-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #667eea;
        }

        .markdown-content {
            line-height: 1.7;
            color: #34495e;
            font-size: 0.95em;
        }

        .markdown-content h1,
        .markdown-content h2,
        .markdown-content h3 {
            margin-top: 15px;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .markdown-content p {
            margin-bottom: 12px;
        }

        .markdown-content ul,
        .markdown-content ol {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .markdown-content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }

        .markdown-content pre {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            overflow-x: auto;
            margin-bottom: 12px;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .markdown-content table th,
        .markdown-content table td {
            border: 1px solid #e1e8ed;
            padding: 8px;
            text-align: left;
        }

        .markdown-content table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        /* Ê®°ÂûãÂõûÁ≠îÊ†áÁ≠æÈ°µ */
        .model-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .model-tab {
            padding: 8px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85em;
            background: white;
        }

        .model-tab:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .model-tab.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .model-response {
            display: none;
        }

        .model-response.active {
            display: block;
        }

        /* ËØÑÂàÜË°®Ê†º */
        .scoring-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }

        .rubrics-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
            font-size: 0.85em;
        }

        .rubrics-table thead {
            background: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .rubrics-table th {
            padding: 10px 8px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #e1e8ed;
        }

        .rubrics-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .rubrics-table tbody tr {
            transition: all 0.2s;
        }

        .rubrics-table tbody tr:hover {
            background: #f8f9ff;
            cursor: pointer;
        }

        .rubric-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 2px;
        }

        .rubric-sublabel {
            font-size: 0.85em;
            color: #95a5a6;
        }

        .score-cell {
            text-align: center;
            min-width: 60px;
        }

        .score-value {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .score-1 {
            background: #d4edda;
            color: #155724;
        }

        .score-0 {
            background: #f8d7da;
            color: #721c24;
        }

        .score-other {
            background: #e2e3e5;
            color: #383d41;
        }

        /* ËØ¶ÊÉÖÂºπÁ™ó */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.5em;
            cursor: pointer;
            color: #95a5a6;
            background: none;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #f0f0f0;
            color: #2c3e50;
        }

        .modal-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-right: 30px;
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section-title {
            font-size: 1em;
            color: #667eea;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .modal-section-content {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            line-height: 1.6;
            font-size: 0.9em;
        }

        .judgement-box {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid #667eea;
        }

        input[type="file"] {
            display: none;
        }

        .hidden {
            display: none;
        }

        /* ÊªöÂä®Êù° */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä JSON Viewer - Ê®°ÂûãËØÑÂàÜÊü•ÁúãÂô®</h1>
        <p class="subtitle">Â∑¶‰æßÈÄâÊã©‰ªªÂä° ¬∑ Âè≥‰æßÊü•ÁúãÊ®°ÂûãÂõûÁ≠î‰∏éËØÑÂàÜËØ¶ÊÉÖ</p>
    </div>

    <div class="main-container">
        <div class="left-panel">
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">ÊãñÊãΩÊñá‰ª∂ÊàñÊñá‰ª∂Â§π</div>
                    <div>
                        <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">ÈÄâÊã©Êñá‰ª∂</button>
                        <button class="btn btn-primary" onclick="document.getElementById('folderInput').click()">ÈÄâÊã©Êñá‰ª∂Â§π</button>
                    </div>
                    <div style="margin-top: 8px;">
                        <button class="btn btn-secondary" onclick="clearData()">Ê∏ÖÈô§</button>
                    </div>
                </div>
                <input type="file" id="fileInput" accept=".json" multiple onchange="handleFiles(this.files)">
                <input type="file" id="folderInput" webkitdirectory directory multiple onchange="handleFiles(this.files)">
            </div>

            <div class="file-list-section" id="fileListSection">
                <div id="fileList"></div>
            </div>
        </div>

        <div class="right-panel" id="rightPanel">
            <div class="empty-state">
                <div style="font-size: 3em; margin-bottom: 15px;">üìã</div>
                <h3>ËØ∑‰∏ä‰º† JSON Êñá‰ª∂</h3>
                <p style="margin-top: 8px;">ÊîØÊåÅÊãñÊãΩÊñá‰ª∂„ÄÅÊñá‰ª∂Â§πÊàñÁÇπÂáªÂ∑¶‰æßÊåâÈíÆÈÄâÊã©</p>
            </div>
        </div>
    </div>

    <div class="modal" id="rubricModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        let jsonData = {};
        let currentFile = null;
        let currentModelTab = null;

        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: true,
                gfm: true
            });
        }

        const uploadArea = document.getElementById('uploadArea');

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = '#eef2ff';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = '#f8f9ff';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = '#f8f9ff';

            const items = e.dataTransfer.items;
            const files = [];
            const promises = [];

            for (let i = 0; i < items.length; i++) {
                const item = items[i];
                if (item.kind === 'file') {
                    const entry = item.webkitGetAsEntry();
                    if (entry) {
                        promises.push(traverseFileTree(entry, files));
                    }
                }
            }

            Promise.all(promises).then(() => handleFiles(files));
        });

        function traverseFileTree(entry, files) {
            return new Promise((resolve) => {
                if (entry.isFile) {
                    entry.file((file) => {
                        if (file.name.endsWith('.json')) {
                            files.push(file);
                        }
                        resolve();
                    });
                } else if (entry.isDirectory) {
                    const dirReader = entry.createReader();
                    dirReader.readEntries((entries) => {
                        const promises = entries.map(e => traverseFileTree(e, files));
                        Promise.all(promises).then(resolve);
                    });
                }
            });
        }

        function handleFiles(files) {
            jsonData = {};
            currentFile = null;

            let loadedCount = 0;
            const fileArray = Array.from(files).filter(f => f.name.endsWith('.json'));

            if (fileArray.length === 0) {
                alert('Êú™ÊâæÂà∞JSONÊñá‰ª∂');
                return;
            }

            fileArray.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        jsonData[file.name] = {
                            data: data,
                            size: file.size,
                            modified: file.lastModified
                        };

                        loadedCount++;
                        if (loadedCount === fileArray.length) {
                            displayFileList();
                            if (Object.keys(jsonData).length > 0) {
                                const firstFile = Object.keys(jsonData)[0];
                                selectFile(firstFile);
                            }
                        }
                    } catch (error) {
                        console.error(`Ëß£ÊûêÂ§±Ë¥•: ${file.name}`, error);
                        loadedCount++;
                        if (loadedCount === fileArray.length) {
                            displayFileList();
                        }
                    }
                };
                reader.readAsText(file);
            });
        }

        function displayFileList() {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';

            Object.keys(jsonData).sort().forEach(fileName => {
                const fileInfo = jsonData[fileName];
                const data = fileInfo.data;
                const rubrics = data.rubrics || [];

                const div = document.createElement('div');
                div.className = 'file-item';
                div.onclick = () => selectFile(fileName);

                const sizeKB = (fileInfo.size / 1024).toFixed(1);

                div.innerHTML = `
                    <div class="file-name">${fileName}</div>
                    <div class="file-meta">${sizeKB} KB ¬∑ ${rubrics.length} ËØÑÂàÜÈ°π</div>
                `;
                fileList.appendChild(div);
            });
        }

        function selectFile(fileName) {
            currentFile = fileName;

            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('active');
                if (item.querySelector('.file-name').textContent === fileName) {
                    item.classList.add('active');
                }
            });

            displayDetail(fileName);
        }

        function displayDetail(fileName) {
            const fileInfo = jsonData[fileName];
            const data = fileInfo.data;
            const rightPanel = document.getElementById('rightPanel');

            let html = '<div class="detail-container">';

            // Â§¥ÈÉ®‰ø°ÊÅØ
            html += `
                <div class="detail-header">
                    <div class="detail-title">${data.uid || fileName}</div>
                    <div class="metadata-tags">
                        ${data.case_id ? `<span class="meta-tag"><strong>Case:</strong> ${data.case_id}</span>` : ''}
                        ${data.type ? `<span class="meta-tag"><strong>Á±ªÂûã:</strong> ${data.type}</span>` : ''}
                        ${data.domain && data.domain.level1 ? `<span class="meta-tag"><strong>È¢ÜÂüü:</strong> ${data.domain.level1}</span>` : ''}
                        ${data.scene && data.scene.level1 ? `<span class="meta-tag"><strong>Âú∫ÊôØ:</strong> ${data.scene.level1}</span>` : ''}
                    </div>
                </div>
            `;

            // ÊèêÁ§∫ËØç
            if (data.prompt) {
                html += `
                    <div class="content-section">
                        <div class="section-title">üìù ÊèêÁ§∫ËØç (Prompt)</div>
                        <div class="markdown-content">${renderMarkdown(data.prompt)}</div>
                    </div>
                `;
            }

            // ÂèÇËÄÉÁ≠îÊ°à
            if (data.example_answer_reference) {
                html += `
                    <div class="content-section">
                        <div class="section-title">‚úÖ ÂèÇËÄÉÁ≠îÊ°à (Reference)</div>
                        <div class="markdown-content">${renderMarkdown(data.example_answer_reference)}</div>
                    </div>
                `;
            }

            // Ê®°ÂûãÂõûÁ≠î
            if (data.model_responses) {
                const models = Object.keys(data.model_responses);
                if (models.length > 0) {
                    currentModelTab = models[0];
                    html += `
                        <div class="content-section">
                            <div class="section-title">ü§ñ Ê®°ÂûãÂõûÁ≠î (Model Responses)</div>
                            <div class="model-tabs">
                                ${models.map(model => `
                                    <div class="model-tab ${model === currentModelTab ? 'active' : ''}" onclick="switchModelTab('${model}')">
                                        ${formatModelName(model)}
                                    </div>
                                `).join('')}
                            </div>
                            ${models.map(model => `
                                <div class="model-response ${model === currentModelTab ? 'active' : ''}" id="model-${model.replace(/[^a-zA-Z0-9]/g, '_')}">
                                    <div class="markdown-content">${renderMarkdown(data.model_responses[model])}</div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
            }

            // ËØÑÂàÜË°®Ê†º
            const rubrics = data.rubrics || [];
            if (rubrics.length > 0) {
                const modelScoreKeys = getModelScoreKeys(rubrics[0]);

                html += `
                    <div class="scoring-section">
                        <div class="section-title">üìä ËØÑÂàÜËØ¶ÊÉÖ (Scoring Details)</div>
                        <div style="overflow-x: auto;">
                            <table class="rubrics-table">
                                <thead>
                                    <tr>
                                        <th style="min-width: 40px;">#</th>
                                        <th style="min-width: 120px;">ËØÑÂàÜÈ°π</th>
                                        <th style="min-width: 80px;">ÊùÉÈáç</th>
                                        ${modelScoreKeys.map(key => `
                                            <th style="min-width: 90px;">${formatModelName(key.replace('auto_score_', ''))}</th>
                                        `).join('')}
                                    </tr>
                                </thead>
                                <tbody>
                                    ${rubrics.map((rubric, idx) => `
                                        <tr onclick="showRubricDetail(${idx})">
                                            <td>${rubric.rubric_number || idx + 1}</td>
                                            <td>
                                                <div class="rubric-label">${rubric.rubric_tag || 'N/A'}</div>
                                                ${rubric.rubric_tag_level_2 ? `<div class="rubric-sublabel">${rubric.rubric_tag_level_2}</div>` : ''}
                                            </td>
                                            <td>${rubric.rubric_weight || 0}</td>
                                            ${modelScoreKeys.map(key => `
                                                <td class="score-cell">${formatScore(rubric[key])}</td>
                                            `).join('')}
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
            }

            html += '</div>';
            rightPanel.innerHTML = html;
        }

        function getModelScoreKeys(rubric) {
            if (!rubric) return [];
            return Object.keys(rubric)
                .filter(key => key.startsWith('auto_score_'))
                .sort();
        }

        function formatModelName(name) {
            const shortNames = {
                'moonshotai_kimi_k2': 'Kimi K2',
                'moonshotai_kimi_k2_0905': 'Kimi 0905',
                'qwen_qwen3_max': 'Qwen3 Max',
                'z_ai_glm_4.7': 'GLM 4.7',
                'anthropic_claude_sonnet_4.5': 'Claude Sonnet',
                'anthropic/claude-sonnet-4.5': 'Claude Sonnet',
                'anthropic/claude-opus-4.5': 'Claude Opus',
                'openai/gpt-5.2': 'GPT 5.2',
                'google/gemini-3-pro-preview': 'Gemini 3 Pro',
                'moonshotai/kimi-k2-thinking': 'Kimi Thinking',
                'moonshotai/kimi-k2-0905': 'Kimi 0905',
                'qwen/qwen3-max': 'Qwen3 Max',
                'z-ai/glm-4.7': 'GLM 4.7'
            };
            return shortNames[name] || name.split('/').pop();
        }

        function formatScore(score) {
            if (score === undefined || score === null || score === '') {
                return '<span class="score-value score-other">-</span>';
            }
            const className = score === 1 ? 'score-1' : (score === 0 ? 'score-0' : 'score-other');
            return `<span class="score-value ${className}">${score}</span>`;
        }

        function switchModelTab(model) {
            currentModelTab = model;
            document.querySelectorAll('.model-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('.model-response').forEach(resp => {
                resp.classList.remove('active');
            });
            document.getElementById('model-' + model.replace(/[^a-zA-Z0-9]/g, '_')).classList.add('active');
        }

        function renderMarkdown(text) {
            if (!text) return '';
            if (typeof marked !== 'undefined') {
                return marked.parse(text);
            }
            return text.replace(/\n/g, '<br>');
        }

        function showRubricDetail(index) {
            const data = jsonData[currentFile].data;
            const rubric = data.rubrics[index];

            let html = `
                <div class="modal-title">${rubric.rubric_tag || 'N/A'}</div>

                ${rubric.rubric_tag_level_2 ? `
                    <div class="modal-section">
                        <div class="modal-section-title">‰∫åÁ∫ßÊ†áÁ≠æ</div>
                        <div class="modal-section-content">${rubric.rubric_tag_level_2}</div>
                    </div>
                ` : ''}

                ${rubric.rubric_detail ? `
                    <div class="modal-section">
                        <div class="modal-section-title">ËØÑÂàÜËØ¥Êòé</div>
                        <div class="modal-section-content">${rubric.rubric_detail}</div>
                    </div>
                ` : ''}

                <div class="modal-section">
                    <div class="modal-section-title">ÊùÉÈáç</div>
                    <div class="modal-section-content">${rubric.rubric_weight || 0}</div>
                </div>
            `;

            // ÊòæÁ§∫ÊâÄÊúâÊ®°ÂûãÁöÑËØÑÂàÜ
            const modelKeys = Object.keys(rubric).filter(k => k.startsWith('auto_score_'));
            modelKeys.forEach(scoreKey => {
                const modelName = scoreKey.replace('auto_score_', '');
                const cotKey = 'auto_judge_cot_' + modelName;

                html += `
                    <div class="modal-section">
                        <div class="modal-section-title">${formatModelName(modelName)} ËØÑÂàÜ</div>
                        <div class="judgement-box">
                            <div><strong>ÂàÜÊï∞:</strong> ${formatScore(rubric[scoreKey])}</div>
                            ${rubric[cotKey] ? `
                                <div style="margin-top: 8px;"><strong>ÂéüÂõ†:</strong></div>
                                <div style="margin-top: 5px;">${rubric[cotKey]}</div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            document.getElementById('modalContent').innerHTML = html;
            document.getElementById('rubricModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('rubricModal').classList.remove('show');
        }

        function clearData() {
            if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆÂêó?')) {
                jsonData = {};
                currentFile = null;
                document.getElementById('fileList').innerHTML = '';
                document.getElementById('rightPanel').innerHTML = `
                    <div class="empty-state">
                        <div style="font-size: 3em; margin-bottom: 15px;">üìã</div>
                        <h3>ËØ∑‰∏ä‰º† JSON Êñá‰ª∂</h3>
                        <p style="margin-top: 8px;">ÊîØÊåÅÊãñÊãΩÊñá‰ª∂„ÄÅÊñá‰ª∂Â§πÊàñÁÇπÂáªÂ∑¶‰æßÊåâÈíÆÈÄâÊã©</p>
                    </div>
                `;
            }
        }

        document.getElementById('rubricModal').addEventListener('click', (e) => {
            if (e.target.id === 'rubricModal') {
                closeModal();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
